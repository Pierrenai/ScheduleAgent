// Online Java Compiler
// Use this editor to write, compile and run your Java code online

import java.util.Hashtable;
import java.util.Arrays;

class HelloWorld {
    public static void main(String[] args) {
        
        String date ="1111-22-33-44";
        
        Hashtable<String, Integer> result = new Hashtable<String, Integer>();
        
        result = dateToHastable(date);
        
        System.out.println("result1 : " + result);
        
        System.out.println("result2 : " + hashtableToDate(result));
        
        System.out.println("result3 : " + hashtableToDate(new Hashtable<String, Integer>()));
        
        System.out.println("result4 : " + contentToHashtable("Moi|12|[Joseph, array, test]|{1111-22-33-44=0.5, 5555-66-77-88=0.6}"));
        
    }
    
    public static Hashtable<String, Integer> dateToHastable(String date){
        // Works with a StringBuilder to be able to "modify" str in getNextNumber
        
        Hashtable<String, Integer> result = new Hashtable<String, Integer>();
        String temp[] = date.split("-");
        
        result.put("year", Integer.parseInt(temp[0]));
        result.put("month", Integer.parseInt(temp[1]));
        result.put("day", Integer.parseInt(temp[2]));
        result.put("hour", Integer.parseInt(temp[3]));
        
        return result;
    }
    
    public static String hashtableToDate(Hashtable<String, Integer> hashtable){
        if(hashtable == null || hashtable.get("year") == null || hashtable.get("month") == null || hashtable.get("day") == null || hashtable.get("hour") == null){
            return null;
        }
        String result = hashtable.get("year") + "-" + hashtable.get("month") + "-" + hashtable.get("day") + "-" + hashtable.get("hour");
            return result;
    }
    
    public static Hashtable<String, Object> contentToHashtable(String content){

        System.out.println("Starting contentToHashtable");

        Hashtable<String, Object> result = new Hashtable<String, Object>();
        String temp[] = content.split("|");
        
        System.out.println(Arrays.toString(temp));
        
        result.put("meetingCreator", temp[0]);
        
        System.out.println("Beacon in contentToHashtable");
        
        result.put("respondentNumber", Integer.parseInt(temp[1]));
        
        System.out.println("Beacon in contentToHashtable");
        
        result.put("participantsList", temp[2]);
        
        System.out.println("Beacon in contentToHashtable");
        
        System.out.println(result);
        
            
        {
            //averageDisponobilitiesList
            temp[3] = content.substring(1, content.length() - 1);
            //Split the string by , to get key-value pairs
            String[] keyValuePairs = content.split(",");
            Hashtable<String, Float> contentMap = new Hashtable();
            //Iterate over the pairs
            for (String pair : keyValuePairs)
            {
            	//Split the pairs to get key and value
            	String[] entry = pair.split("=");
            	//Add them to the hashmap and trim whitespaces
            	contentMap.put(entry[0].trim(), Float.parseFloat(entry[1].trim()));
            
            }
            result.put("averageDisponibilitiesList", contentMap);
        }
        
        return result;
    }
}

/*

content = content.substring(1, content.length() - 1);

//Split the string by , to get key-value pairs
String[] keyValuePairs = content.split("|");

Hashtable<String, Integer> contentMap = new Hashtable();

//Iterate over the pairs
for (String pair : keyValuePairs)
{
	//Split the pairs to get key and value
	String[] entry = pair.split("=");

	//Add them to the hashmap and trim whitespaces
	contentMap.put(entry[0].trim(), Integer.parseInt(entry[1].trim()));
}
*/
